---
## -----------------
## インストールするパッケージ
## -----------------
opendkim_packages:
  - opendkim
  - opendkim-tools

## -----------------
## DKIMセレクター
## -----------------
opendkim_selector: default

## -----------------
## 設定するドメイン
## -----------------
opendkim_domains: []
#   - example.com
#   - example.org
#   - example.jp

## -----------------
## opendkim-gkeygenで鍵を生成する時のキー長
## -----------------
opendkim_rsa_keylen: 2048

## -----------------
## 連携させるMTA
## -----------------
opendkim_mta: postfix

## -----------------
## OpenDKIMの動作ディレクトリ
## -----------------
opendkim_run_dir: /var/spool/postfix/opendkim

## -----------------
## OpenDKIMの設定
## -----------------
opendkim_cfg:
  AutoRestart: "yes"
  # Syslog: "yes"
  # SyslogSuccess: "yes"
  LogWhy: "yes"
  ## Canonicalization: relaxed/relaxed
  Mode: sv
  ## SubDomains: "no"
  # OversignHeaders: From
  # UserID: "{{ opendkim_user }}"
  # UMask: "007"
  Socket: "{{ opendkim_run_dir }}/opendkim.sock"
  # PidFile: /run/opendkim/opendkim.pid
  # TrustAnchorFile: /usr/share/dns/root.key

## -----------------
## 接続を許可するホストの設定
## ※1つ以上設定されている場合はInternalHosts/ExternalIgnoreListの設定を設定ファイルに自動で追加します
## -----------------
opendkim_trusted_hosts:
  - 127.0.0.1
  - ::1
  - locahost
  # - 192.168.0.0/16
  # - 10.0.0.0/8
  # - 172.16.0.0/12

## -----------------
## Postfixの連携設定
## -----------------
opendkim_postfix_cfg:
  - key: milter_protocol
    value: 6
  - key: milter_default_action
    value: accept
  - key: smtpd_milters
    value: inet:opendkim/opendkim.sock
  - key: non_smtpd_milters
    value: inet:opendkim/opendkim.sock
